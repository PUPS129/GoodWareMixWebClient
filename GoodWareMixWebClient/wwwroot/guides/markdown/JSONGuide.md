# Руководство для импорта файла типа «JSON»
Файл представляет собой структуру записей типа:
```json
{
    "one": 2,
    "three": {
        "point_1": "point_2",
        "point_3": 3.4
    },
    "list": [
        "one",
        "two",
        "three"
    ]
}
```
Для начала импорта пользователь должен заполнить все необходимые поля. Обязательные поля помечены ```*```
#### Подключение
- Url - Требуется ввести ссылку на файл импорта либо указать API поставщика вместе с ключом (API Key) если принимает через Query параметр.
- Тип запроса - В выпадающем списке требуется выбрать тип запроса на сервер поставщика (В большинстве случаев GET).
- Тип файла - В выпадающем списке требуется выбрать тип файла для импорта.
- Кодировка файла - Если в файле для импорта указана другая кодировка (например windows 1251) пользователь должен указать её в поле.
- Стартовая страница - Поле для поставщиков у которых API позволяет получать список товаров постранично, нужно указать первую страницу с API поставщика.
- Кол-во записей на странице - Количество товаров выдаваемое поставщиком на одной странице API.
- Header запроса - Требуется ввести список параметров запроса.  (Например ```Authorization:Bearer Token```).
Структура: ```[{"HeaderName":"...","HeaderValue":"..."}, {...}]``` где ```...``` требуется указать Имя и Значение в соответствии с документацией поставщика.
- Body запроса - Тело запроса если используется ```POST``` запрос.
Структура: ```{"token":"..."}``` где ```...``` требуется указать API-Key в соответствии с документацией поставщика.

#### Сопоставление по коду поставщика
- Вендор ID* - Требуется ввести название поля связанного с внутренним артикулом товара (```codeAlpha, артикль```).
- Проверка Вендор ID - Здесь можно найти префикс поставщика по значению артикля. Если проверка прошла успешно, ```"Префикс"``` автоматически заполнится.
- Префикс - Префикс заданный при импорте нуменклатуры в учётной системе. 

#### Товар
- Основной каталог - Имя тега в котором хранится один товар. (например ```data```), Может отсутствовать.
- Название* - Имя тега хранящий название. (например ```name```).
- Полное Название - Имя тега хранящего полное название. (например ```longname```).
- Описание - Имя тега хранящего описание. (например ```description```).
- Вендор - Имя тега хранящий название вендора. (например ```vendor```).
- Фото - Имя тега хранящий ссылку на фото. (например ```picture```, ```pictures.picture```).
Если фото находится в другом аттрибуте то нужно указать путь то нужного аттрибута (например ```pictures.picture```). 
- Фото 360 - Имя тега хранящий ссылку на фото. (например ```photo360```, ```photos360.photo360```).
- Видео - Имя тега хранящий ссылку на видео. (например ```video```, ```videos.video```).
- Особенности - Имя тега хранящий список особенностей. (например ```features```, ```etim7.etim.features```).

#### Аттрибуты
- Ссылка на аттрибуты - Если аттрибуты для товаров находятся в другом файле то необходимо указать ссылку на этот файл.
- Каталог аттрибутов URL - Требуется указать входную точку внешнего файла аттрибутов. (например ```data```).
- Каталог аттрибутов - Требуется указать входную точку файла аттрибутов. (например ```param```).
- Название - Требуется указать имя аттрибута. (например ```name```).
- Единица измерения - Требуется указать единицу измерения. (например ```unit```).
- Тип - Требуется указать тип. (например ```type```).
- Значение - Требуется указать значение. (например ```value```).

#### Примеры
- Если нужная запись находится в другом в массиве то нужно указать путь. 

    Пример для сертификатов - ```certificate.name```
  ```json
    {
        "certificate": [
                {
                    "issued_by": "Роспотребнадзор",
                    "active_to": "20.03.2023",
                    "name": "Санитарно - эпидемиологическое заключение",
                    "url": "..."
                }
            ],
    }
  ```
 
- Если требуется взять массив значений и взять из этого массива конкретное значение.

    Пример для фото - ```ImgJpeg[*].uri```
  ```json
    {
        "ImgJpeg": [
			{
				"file": {
					"baseName": "PictureName.jpg",
					"name": "UsingName.jpg",
					"size": 620,
					"uri": "UsingName.jpg"
				}
			}
		]
    }
    ```
    | Синтаксис          | Описание                                                          |
    | :----------:       | -----------                                                       |
    | $                  | корневой объект/элемент                                           |
    | @                  | текущий объект/элемент                                            |
    |. или []            | дочерний оператор                                                 |
    | . .                | рекурсивный спуск                                                 |
    | *                  | подстановочный знак. Все объекты/элементы независимо от их имен.  |
    | []                 | оператор нижнего индекса                                          |
    | [,]                | допускает альтернативные имена или индексы массива в виде набора. | 
    | [начало:конец:шаг] | оператор среза массива.                                           |
    | ?()                | применяет выражение фильтра (скрипта).                            |
    | ()                 | выражение сценария, используя базовый механизм сценариев.         |
    
    

    